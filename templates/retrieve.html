<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/favicon/site.webmanifest">
    <!--
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    -->
    <script src='/static/main.js'></script>

</head>

<body>
    <h2 id="plaintext_output"></h2>
    <script>
       
        function get_hash() {
            let hash = window.location.hash;
            if (hash.length == 0) {
                console.error("No key found in URL");
                return null;
            }
            return hash.substring(1);
        }

        window.onload = function() {
            const ct_b64={{ .ciphertext }};
            let ct = base64ToUint8(ct_b64);
            let key = base64ToUint8(get_hash());
            
            do_decryption(key, ct).then(function (result) {
                let plaintext = uint8ToUtf8(result);
                document.getElementById("plaintext_output").innerHTML = plaintext;
            });
        }
    </script>
</body>

</html>