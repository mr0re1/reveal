<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/favicon/site.webmanifest">


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    
    <script src='/static/main.js'></script>

</head>

<body data-new-gr-c-s-check-loaded="14.1089.0" data-gr-ext-installed="">
    <div class="col-lg-8 mx-auto p-4 py-md-5">
        <header class="d-flex align-items-center pb-3 mb-5 border-bottom">
            <a href="/" class="d-flex align-items-center text-dark text-decoration-none">
                <img src="/static/favicon/favicon-32x32.png" alt="logo" width="40" height="32" class="me-2" />
                <span class="fs-4">Some header</span>
            </a>
        </header>

        <main>
            
            <div class="form-group">
                <textarea class="form-control form-control-lg" type="text" id="plaintext_input"></textarea>

                <button class="btn btn-primary" onclick="on_make_button_click()">make</button>
            </div>
            </div>

            <a id="link"></a>
            <!--
            <h1>Get started with Bootstrap</h1>
            <p class="fs-5 col-md-8">Quickly and easily get started with Bootstrap's compiled, production-ready files
                with this barebones example featuring some basic HTML and helpful links. Download all our examples to
                get started.</p>

            <div class="mb-5">
                <a href="/docs/5.2/examples/" class="btn btn-primary btn-lg px-4">Download examples</a>
            </div>

            <hr class="col-3 col-md-2 mb-5">
            -->


            <footer class="pt-5 my-5 text-muted border-top">
                Created by the <a href="http://orlov.love">mr0re1</a> · © 2022
            </footer>
    </div>

    


</body>

<script>
    function get_plaintext_input() {
        let plaintext = document.getElementById("plaintext_input").value;
        return utf8ToUint8(plaintext);
    }

    function on_make_button_click() {
        let plaintext = get_plaintext_input();
        if (plaintext.length == 0) {
            alert("Please enter some text to encrypt");
            return;
        }

        do_encryption(plaintext).then(function (result) {
            let key = result.key;
            let ct = result.ciphertext;

            save(ct).then(function (response) {
                url = response.url + "#" + uint8ToBase64(new Uint8Array(key));
                link = document.getElementById("link");
                link.href = url;
                link.innerHTML = url;
            });

        });

    }

</script>

</html>